!function(){"use strict";function t(t){if(void 0===t||"string"!=typeof t)throw 400;w=t}function e(t,e){if(void 0===t||"string"!=typeof t)throw 400;if(void 0===e||"string"!=typeof e)throw 400;c=t,y=e}function o(t,e){function o(){function o(t){function o(t){t||(i.style.display="none",e())}t.preventDefault();var a=i.querySelector("#ds_base_login__username").value,r=i.querySelector("#ds_base_login__password").value;a&&r&&n(a,r,o)}var i=document.createElement("form");i.id="ds_base_login",i.innerHTML=['<input id="ds_base_login__username" type="text" placeholder="Username">','<input id="ds_base_login__password" type="password" placeholder="Password">','<button type="submit">Login</button>'].join("\n"),i.addEventListener("submit",o),t.appendChild(i)}if(void 0===t||"object"!=typeof t)throw 400;if(void 0===e||"function"!=typeof e)throw 400;a()?e():o()}function n(t,e,o){function n(){if(4===r.readyState){if(200!==r.status)return o(r.status?r.status:500);var t;try{t=JSON.parse(r.responseText).token}catch(e){return o(500)}return t?(window.localStorage.setItem("ds_token",t),o(null)):o(500)}}if(void 0===t||"string"!=typeof t)throw 400;if(void 0===e||"string"!=typeof e)throw 400;if(void 0===o||"function"!=typeof o)throw 400;var i=w+":3010/api/login",a="username="+t+"&password="+e,r=new XMLHttpRequest;r.open("POST",i,!0),r.setRequestHeader("Content-type","application/x-www-form-urlencoded"),r.onreadystatechange=n,r.send(a)}function i(){window.localStorage.removeItem("ds_token"),l()}function a(){return null!==window.localStorage.getItem("ds_token")}function r(){return window.localStorage.getItem("ds_token")}function s(t,e){function o(){if(4===i.readyState)return 200!==i.status?e(i.status?i.status:500):(window.localStorage.setItem("ds_token",t),e(null))}if(void 0===t||"string"!=typeof t)throw 400;if(void 0===e||"function"!=typeof e)throw 400;var n=w+":3010/api/valid",i=new XMLHttpRequest;i.open("POST",n,!0),i.setRequestHeader("Authorization","bearer "+t),i.setRequestHeader("Content-type","application/json"),i.onreadystatechange=o,i.send(JSON.stringify({}))}function d(t,e){function o(){if(4===n.readyState){if(200!==n.status)return e(n.status?n.status:500);try{return e(null,JSON.parse(n.responseText))}catch(t){return e(415,null)}}}if(void 0===t||"string"!=typeof t)throw 400;if(void 0===e||"function"!=typeof e)throw 400;var n=new window.XMLHttpRequest;n.onreadystatechange=o,n.open("GET","/upload/"+c+"-"+y+"/"+t,!0),n.send()}function u(t,e,o){function n(){if(4===s.readyState)return o(200!==s.status?s.status?s.status:500:null)}if(void 0===t||"object"!=typeof t)throw 400;if(void 0===e||"string"!=typeof e)throw 400;if(void 0===o||"function"!=typeof o)throw 400;var i=new window.Blob([window.JSON.stringify(t)],{type:"application/json"}),a=new window.FormData,r=window.localStorage.getItem("ds_token"),s=new window.XMLHttpRequest;a.append("user",c),a.append("repo",y),a.append("file",i,e),s.open("POST",w+":3010/api/upload",!0),s.setRequestHeader("Authorization","bearer "+r),s.onreadystatechange=n,s.send(a)}function p(t,e,o){function n(){if(4===r.readyState)return e(200!==r.status?r.status?r.status:500:null)}if(void 0===t||"object"!=typeof t)throw 400;if(void 0===e||"function"!=typeof e)throw 400;if(void 0!==o&&"string"!=typeof o)throw 400;var i=new window.FormData,a=window.localStorage.getItem("ds_token"),r=new window.XMLHttpRequest;i.append("user",c),i.append("repo",y),i.append("file",t),void 0!==o&&i.append("filename",o),r.open("POST",w+":3010/api/upload",!0),r.setRequestHeader("Authorization","bearer "+a),r.onreadystatechange=n,r.send(i)}function f(t,e){function o(){if(4===i.readyState)return e(200!==i.status?i.status?i.status:500:null)}if(void 0===t||"string"!=typeof t)throw 400;if(void 0===e||"function"!=typeof e)throw 400;var n=window.localStorage.getItem("ds_token"),i=new window.XMLHttpRequest;i.open("POST",w+":3010/api/delete",!0),i.setRequestHeader("Authorization","bearer "+n),i.setRequestHeader("Content-type","application/json"),i.onreadystatechange=o,i.send(window.JSON.stringify({user:c,repo:y,filename:"example.pdf"}))}function l(){window.location.reload()}var w,c,y,g={};g.setBase=t,g.setRepo=e,g.addAdminTools=o,g.login=n,g.logout=i,g.authenticated=a,g.getToken=r,g.loginToken=s,g.downloadObject=d,g.uploadObject=u,g.uploadFile=p,g.remove=f,window.ds=g}();